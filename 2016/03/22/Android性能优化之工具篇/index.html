<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="性能优化工具,hierarchyviewer,lint" />





  <link rel="alternate" href="/atom.xml" title="PleaseCallMeCoder" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="Android性能优化之工具篇。">
<meta property="og:type" content="article">
<meta property="og:title" content="Android性能优化之工具篇">
<meta property="og:url" content="http://yoursite.com/2016/03/22/Android性能优化之工具篇/index.html">
<meta property="og:site_name" content="PleaseCallMeCoder">
<meta property="og:description" content="Android性能优化之工具篇。">
<meta property="og:image" content="http://img.blog.csdn.net/20160322182907244">
<meta property="og:image" content="http://img.blog.csdn.net/20160322183209649">
<meta property="og:image" content="http://img.blog.csdn.net/20160322183319917">
<meta property="og:image" content="http://img.blog.csdn.net/20160322225553738">
<meta property="og:image" content="http://img.blog.csdn.net/20160322225918710">
<meta property="og:image" content="http://img.blog.csdn.net/20160323090402754">
<meta property="og:image" content="http://img.blog.csdn.net/20160322174052054">
<meta property="og:image" content="http://img.blog.csdn.net/20160322174214554">
<meta property="og:image" content="http://img.blog.csdn.net/20160322174954104">
<meta property="og:updated_time" content="2016-05-07T04:43:06.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android性能优化之工具篇">
<meta name="twitter:description" content="Android性能优化之工具篇。">
<meta name="twitter:image" content="http://img.blog.csdn.net/20160322182907244">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2016/03/22/Android性能优化之工具篇/"/>





  <title>Android性能优化之工具篇 | PleaseCallMeCoder</title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">PleaseCallMeCoder</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">每个人都在成为大神的路上，只不过有的人在走，而有的人在跑。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-search">
          <a href="/search" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            搜索
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2016/03/22/Android性能优化之工具篇/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="任磊">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PleaseCallMeCoder">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Android性能优化之工具篇
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-03-22T18:00:00+08:00">
                2016-03-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/性能优化/" itemprop="url" rel="index">
                    <span itemprop="name">性能优化</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Android性能优化之工具篇。</p>
<ul>
<li><a id="more"></a>
“哈哈，bug改完啦，准备准备上线了，好开心！”这句话简直喜闻乐见，我自己也没少说，但我想说的是，我们的App真的可以了么？也许在我们没有注意到的地方，还有许多问题在潜伏着，等待着上线后破土而出。出于求稳的目的，我用lint工具检测了一番，炸了，5000+条需要优化的地方，哭的心都有了。所以这个故事告诉我们：<strong>永远不要认为自己的App没毛病</strong>。</li>
</ul>
<p>言归正传，在上一篇博客中跟大家分享了AndroidUI优化中的布局优化，今天就做一个补充。工欲善其事，必先利其器，想要做好Android优化，准备几把好刀并不过分吧，接下来就跟大家分享下Android开发中UI优化相关的几个利器。</p>
<p>The Android SDK includes a variety of tools that help you develop mobile applications for the Android platform. The tools are classified into two groups: SDK tools and platform tools. SDK tools are platform independent and are required no matter which Android platform you are developing on. Platform tools are customized to support the features of the latest Android platform.</p>
<p>以上是官方文档中关于开发工具的概述，<strong>Android SDK包含了许多工具来帮助我们开发Android App，这些工具呢大概分为两类：SDK工具和平台工具。SDK工具是独立于平台之外的，而平台工具是为了支持最新的Android开发平台而定制的。</strong></p>
<p>今天我们来看一下SDK工具中比较实用的有关UI优化的两个开发工具，<strong>Hierarchy Viewer (hierarchyviewer)和lint</strong>。</p>
<p>##Hierarchy Viewer (hierarchyviewer)</p>
<p>####概述<br><strong>Hierarchy Viewer是我们的布局文件的层级结构变的可见，并且在每一个节点标注此节点的性能相关的信息。通过此工具可以详细的理解当前界面的控件布局以及某个控件的属性（name、id、height等）。同时，我们可以借助Hierarchy Viewer学习别人优秀的布局方式，也能更深入更全面更整体的把握xml布局文件。</strong></p>
<p>####使用方法<br>1.连接设备真机或者模拟器；</p>
<p>2.启动你要观察的应用（真机可能无法连接，我用的小米4，连接上了，没读到内容，如下图）；</p>
<p><img src="http://img.blog.csdn.net/20160322182907244" alt="这里写图片描述"></p>
<p>3.Androidstudio中启动Hierarchy Viewer的方式如图所示</p>
<p><img src="http://img.blog.csdn.net/20160322183209649" alt="这里写图片描述"></p>
<p>然后点击<img src="http://img.blog.csdn.net/20160322183319917" alt="这里写图片描述">   </p>
<p>选择Hierarchy Viewer。</p>
<p>4.然后选中我们要查看的进程，等待加载完毕。</p>
<p>####详细说明<br>加载完成后效果如图，这张图是<a href="http://blog.csdn.net/sdkfjksf/article/details/50888655" target="_blank" rel="external">小火箭</a>的界面的view树。</p>
<p><img src="http://img.blog.csdn.net/20160322225553738" alt=""></p>
<p>观察单个view，选择单个view后会出现如下图所示图形。这里会看到Measure、Layout、Draw的耗时。</p>
<p><img src="http://img.blog.csdn.net/20160322225918710" alt="这里写图片描述"></p>
<p>我们看一下官网对应的介绍</p>
<p><img src="http://img.blog.csdn.net/20160323090402754" alt="这里写图片描述"></p>
<p><strong>看小火箭的view层级结构图，35views表明这个framelayout下包含35个子控件了。而下方的带颜色的三个圆圈指示灯，分别说明了在测量(measure)、布局(layout)以及画视图(draw)三个阶段，这个控件所占用的时间百分比，如果是绿色的，表示该控件在该阶段比起其他的50%的控件的速度要快，为黄色的表示比起其他的50%的控件的速度要慢，为红色的则表示该控件在该阶段的处理速度是最慢的。</strong></p>
<p><strong>要注意的是，在Hierarchy Viewer中，当修改了界面后，需要手工点Refresh按钮，才能同步在Hierarchy Viewer中显示更新过后的界面情况。</strong></p>
<p>##lint</p>
<p>####概述<br><strong>Android中的lint，是一个静态代码分析工具，它可以帮助我们检测我们项目中的资源文件中的潜在bug，并且提供最优的改进方案。</strong></p>
<p>The lint tool checks your Android project source files for potential bugs and optimization improvements for correctness, security, performance, usability, accessibility, and internationalization. You can run lint from the command-line or from Android Studio.</p>
<p>通过看官方文档我们了解到，lint可以帮我们做检查资源文件，并且提高app的正确性，安全性，性能，实用性以及国际化等。我们可以<strong>通过命令行或者直接在Androidstudio中使用lint</strong>来扫描我们的app。</p>
<p>####功能<br>1.布局性能<br>2.未使用到资源<br>3.不一致的数组大小<br>4.国际化问题（硬编码）<br>5.图标的问题（重复的图标，错误的大小）<br>6.可用性问题（如不指定的文本字段的输入型）<br>7.manifest文件以及gradle文件的错误</p>
<p>####在AndroidStudio中的使用<br><img src="http://img.blog.csdn.net/20160322174052054" alt="这里写图片描述"></p>
<p>如图所示，找到Analyze，点击Inspect Code，然后弹出一个选择范围的对话框</p>
<p><img src="http://img.blog.csdn.net/20160322174214554" alt="这里写图片描述"></p>
<p>这里我们使用默认的整个工程。然后看下结果：</p>
<p><img src="http://img.blog.csdn.net/20160322174954104" alt="这里写图片描述"></p>
<p>左边显示的是检测到的所有问题，点击某个节点，右边会显示对应的详细信息。比如我这张图中显示的是避免使用小于12sp的单位，因为谷歌官方是不推荐使用小于12sp的单位的。</p>
<p>这里只是简单介绍下lint的应用，我们<strong>还可以在Androidstudio中设置link的偏好，配置lint.xml文件，配置lint检测java和xml布局文件。</strong>具体可以参照官方文档操作，<a href="http://developer.android.com/tools/debugging/improving-w-lint.html" target="_blank" rel="external">戳这里。</a></p>
<p>参考连接：</p>
<p><a href="http://developer.android.com/tools/debugging/debugging-ui.html" target="_blank" rel="external">http://developer.android.com/tools/debugging/debugging-ui.html</a><br><a href="http://developer.android.com/tools/debugging/improving-w-lint.html" target="_blank" rel="external">http://developer.android.com/tools/debugging/improving-w-lint.html</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/性能优化工具/" rel="tag"># 性能优化工具</a>
          
            <a href="/tags/hierarchyviewer/" rel="tag"># hierarchyviewer</a>
          
            <a href="/tags/lint/" rel="tag"># lint</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/03/20/AndrodUI优化之布局优化/" rel="next" title="AndrodUI优化之布局优化">
                <i class="fa fa-chevron-left"></i> AndrodUI优化之布局优化
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/03/28/Android性能优化之渲染优化的8个点/" rel="prev" title="Android性能优化之渲染优化的8个点">
                Android性能优化之渲染优化的8个点 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="任磊" />
          <p class="site-author-name" itemprop="name">任磊</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">34</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">75</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">任磊</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

</body>
</html>
